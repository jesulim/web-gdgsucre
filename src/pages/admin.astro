---
import Header from "@/components/Header.astro"
import { AdminTabs } from "@/components/admin/AdminTabs"
import BaseLayout from "@/layout/BaseLayout.astro"
import { getProfile } from "@/lib/services/profileService"
import { createUserClient } from "@/lib/supabase"

const supabase = await createUserClient(Astro.cookies)
const profile = await getProfile(supabase)

if (!profile?.is_admin) {
  Astro.redirect("/")
}
---

<BaseLayout>
    <Header />
    <main class="mt-20 p-4 lg:p-8">
        <h1 class="text-2xl font-bold mb-6">Panel de Administraci√≥n</h1>
        <AdminTabs client:visible />
    </main>
</BaseLayout>
