---
import { Image } from "astro:assets"
import IOE25Banner from "@/assets/logos/IOE25Banner.jpg"
import { Button } from "@/components/ui/button"
import { getCurrentUser } from "@/lib/services/profileService.ts"

const { cookies } = Astro
const accessToken = cookies.get("sb-access-token")?.value ?? null
const user = accessToken ? await getCurrentUser() : null

const redirectHref = user
  ? "/registro/io-extended-25"
  : "/api/auth/signin?next=/registro/io-extended-25"
---

<div class="flex flex-col items-center justify-center">
  <Image
    class="h-64 w-full object-cover object-center md:h-auto"
    src={IOE25Banner}
    alt="Google I/O Extended Sucre 2025 Banner"
    width={2048}
    height={1152}
  />
  <a href={redirectHref} class="-mt-12">
    <Button type="button"> Reg√≠strate </Button>
  </a>
</div>

