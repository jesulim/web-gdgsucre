---
import { Image } from "astro:assets"

// Importar las imágenes de sponsors (ajusta los nombres según tus archivos)
import Colaborador1 from "@/assets/io-extended-25/colaboradores/colaborador1.webp"
import Colaborador2 from "@/assets/io-extended-25/colaboradores/colaborador2.webp"
import Colaborador3 from "@/assets/io-extended-25/colaboradores/colaborador3.webp"
import Colaborador4 from "@/assets/io-extended-25/colaboradores/colaborador4.webp"
import Colaborador5 from "@/assets/io-extended-25/colaboradores/colaborador5.webp"
import FondoSponsor from "@/assets/io-extended-25/sponsors/fondo.webp"

const colaboradores = [
  { src: Colaborador1, alt: "sociedad", width: 320, height: 256 },
  { src: Colaborador2, alt: "python", width: 260, height: 240 },
  { src: Colaborador3, alt: "centro", width: 288, height: 288 },
  { src: Colaborador4, alt: "flutter", width: 240, height: 240 },
  { src: Colaborador5, alt: "univalle", width: 320, height: 320 },
]

// Duplicar los sponsors para crear el efecto infinito
const duplicatedColaboradores = [...colaboradores, ...colaboradores]
---

<section class="w-full sponsor-section">
  <!-- Título -->
  <div class="max-w-7xl mx-auto px-4 md:px-6 mb-8 md:mb-12">
    <div class="text-center">
      <h2 class="text-2xl md:text-4xl font-bold text-black mb-2" style="font-family: var(--font-google);">
        COLABORADORES
      </h2>
    </div>
  </div>
  
  <!-- Carrusel -->
  <div class="w-full overflow-hidden">
    <div class="flex animate-marquee hover:animate-none transition-all duration-1000 ease-linear">
      {duplicatedColaboradores.map((colaborador, index) => (
        <div 
          class="flex-shrink-0 mx-3 md:mx-10 transform mobile-sponsor"
        >
          <div class="flex items-center justify-center h-20 md:h-auto">
            <Image
              src={colaborador.src}
              alt={colaborador.alt}
              widths={[120, 150, 200, 300]} 
              sizes="(max-width: 480px) 120px, (max-width: 768px) 150px, (max-width: 1024px) 200px, 300px"
              height={colaborador.height}
              loading="lazy"
              decoding="async"
              class="object-contain transition-all duration-300 mobile-logo"
            />
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .sponsor-section {
    background-image: url('/src/assets/io-extended-25/sponsors/fondo-sponsors.webp');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    overflow: hidden; 
  }
  
  @keyframes marquee {
    0% { transform: translateX(0); }
    100% { transform: translateX(-33.333%); } /* Ajustado para triple duplicación */
  }
  
  .animate-marquee {
    display: flex;
    width: fit-content;
    animation: marquee 45s linear infinite;
  }
  
  /* Optimizaciones específicas para móvil */
  @media (max-width: 768px) {
    .animate-marquee {
      animation-duration: 25s; /* Más rápido en móvil */
    }
    
    .mobile-sponsor {
      margin-left: 0.5rem;
      margin-right: 0.5rem;
      min-width: 120px; /* Ancho mínimo en móvil */
    }
    
    .mobile-logo {
      max-height: 60px; /* Altura máxima en móvil */
      width: auto;
    }
    
    /* Pausa la animación al hacer touch en móvil */
    .animate-marquee:active {
      animation-play-state: paused;
    }
  }
  
  @media (max-width: 480px) {
    .animate-marquee {
      animation-duration: 20s; /* Aún más rápido en pantallas muy pequeñas */
    }
    
    .mobile-sponsor {
      margin-left: 0.25rem;
      margin-right: 0.25rem;
      min-width: 100px;
    }
    
    .mobile-logo {
      max-height: 50px;
    }
  }
  
  /* Mejoras para dispositivos táctiles */
  @media (hover: none) and (pointer: coarse) {
    .animate-marquee:hover {
      animation-play-state: running; /* Mantiene la animación en dispositivos táctiles */
    }
  }
  
  /* Reducir movimiento para usuarios que prefieren menos animación */
  @media (prefers-reduced-motion: reduce) {
    .animate-marquee {
      animation-duration: 60s; /* Más lento */
    }
  }
</style>

