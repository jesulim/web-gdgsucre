---
import Corazon from "@/assets/events/devfest-25/corazon.svg"
import EndEventIcon from "@/assets/events/devfest-25/end_event.svg"
import FoodIcon from "@/assets/events/devfest-25/food.svg"
import LightbulbIcon from "@/assets/events/devfest-25/lightbulb_on.svg"
import LlaveAbierta from "@/assets/events/devfest-25/llave-abierta.svg"
import LlaveCerrada from "@/assets/events/devfest-25/llave-cerrada.svg"
import Nube from "@/assets/events/devfest-25/nube.svg"
import ScheduleCard from "@/components/devfest-25/schedule/ScheduleCard.astro"
import scheduleDataRaw from "@/components/devfest-25/schedule/schedule.json"

interface ScheduleEvent {
  type: "talk" | "event"
  time: string
  title: string
  icon: "food" | "lightbulb" | "end_event"
  description?: string
  speaker?: string
}

const scheduleData = scheduleDataRaw as ScheduleEvent[]

const icons = {
  food: FoodIcon,
  lightbulb: LightbulbIcon,
  end_event: EndEventIcon,
}
---

<section
  id="schedule"
  class="relative mx-auto my-8 flex max-w-7xl flex-col items-center justify-center gap-8 px-4 md:my-12 md:gap-12"
>
  <h2 class="text-center text-3xl font-bold text-white md:text-4xl lg:text-6xl">
    Event Agenda
  </h2>

  <div
    aria-hidden="true"
    class="pointer-events-none absolute inset-0 -z-10 hidden overflow-visible lg:block"
  >
    <img
      src={LlaveAbierta.src}
      width={LlaveAbierta.width}
      height={LlaveAbierta.height}
      alt=""
      class="absolute -left-16 h-[520px] w-auto opacity-80"
      loading="lazy"
      style={{ top: "0px" }}
    />
    <img
      src={Corazon.src}
      width={Corazon.width}
      height={Corazon.height}
      alt=""
      class="absolute -right-1 h-[230px] w-auto opacity-80"
      loading="lazy"
      style={{ top: "770px" }}
    />
    <img
      src={Nube.src}
      width={Nube.width}
      height={Nube.height}
      alt=""
      class="absolute -left-1 h-[230px] w-auto opacity-80"
      loading="lazy"
      style={{ top: "990px" }}
    />
    <img
      src={LlaveCerrada.src}
      width={LlaveCerrada.width}
      height={LlaveCerrada.height}
      alt=""
      class="absolute -right-16 h-[520px] w-auto opacity-80"
      loading="lazy"
      style={{ top: "1320px" }}
    />
  </div>

  <div class="relative w-full max-w-6xl">
    <div class="flex flex-col gap-4 md:gap-6 lg:gap-8">
      {
        scheduleData.map((event, index) => {
          const Icon = icons[event.icon];
          const isEven = index % 2 === 0;
          const isLast = index === scheduleData.length - 1;
          return (
            <div
              class:list={[
                "flex flex-row items-stretch gap-3 relative lg:gap-6",
                { "lg:flex-row-reverse": !isEven },
              ]}
            >
              <div class="hidden lg:flex lg:flex-1" />
              <div class="relative hidden w-8 shrink-0 flex-col items-center lg:flex">
                <div class="relative z-10 flex h-16 w-16 shrink-0 items-center justify-center">
                  <Icon />
                </div>
                {!isLast && <div class="w-0.5 grow bg-[#878585]" />}
              </div>
              <div class="w-full flex-1 py-1 lg:w-auto">
                <ScheduleCard
                  type={event.type}
                  time={event.time}
                  title={event.title}
                  description={event.description}
                  speaker={event.speaker}
                />
              </div>
            </div>
          );
        })
      }
    </div>
  </div>
</section>
